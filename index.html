<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Open App</title>
  <script>
    function openApp() {
      const params = new URLSearchParams(window.location.search);
      const productId = params.get('product'); // Get '25' from ?product=25

      const deepLink = `gatch://product/${productId}`;
      const fallbackPlayStore = "https://play.google.com/store/apps/details?id=com.Renxo.DeepLink";// com.narendramodiapp

      const firebaseDynamicLink = "https://renxo.page.link/?" +
        "link=" + encodeURIComponent("https://ronil-renxo.github.io/deep-link?product=" + productId) +
        "&apn=com.Renxo.DeepLink" +
        "&afl=" + encodeURIComponent(fallbackPlayStore); // fallback

      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const isAndroid = /android/i.test(userAgent);

      if (productId && isAndroid) {
        // Try deep link first
        window.location.href = deepLink;

        // If app not installed, fallback
        setTimeout(() => {
          window.location.href = firebaseDynamicLink;
        }, 1500);
      } else {
        // Fallback for other platforms or errors
        window.location.href = fallbackPlayStore;
      }
    }
  </script>
</head>
<body onload="openApp()">
  <h1>Redirecting to App...</h1>
</body>
</html>
